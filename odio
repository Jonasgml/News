# -*- coding: utf-8 -*-
"""
Created on Tue May  9 15:53:54 2017

@author: jonas.oliveira2
"""
import re
text = 'war'
keyword = 'war'
bool(re.search(r'\b{}\b'.format(keyword), text))

#importa as bibliotecas que vai usar
from bs4 import BeautifulSoup #essa biblioteca tem esse jeito de importar
import requests 
from datetime import datetime  #importando uma função específica do pacote
import csv 
import re
# definindo o url onde vai ser feita a busca
url = 'http://g1.globo.com/' 
# pega as infos da url (código fonte + infos)
page = requests.get(url) #se o valor de page for 200 a página foi importada
# separa o código fonte
soup = BeautifulSoup(page.content,'html.parser')
data = soup.find_all('div', class_='article-title')

links=[]
for div in data:
   Tag_a = div.findAll('a')
   for a in Tag_a:
       temp = a['href'].split('/')
       if url_keyword:
          for i in temp:
              if i==url_keyword:
                  links.append(a['href'])
              else:
                  links.append(a['href'])
return links
# organiza o código fonte 
soup = BeautifulSoup(html)
# procura o atributo id na tabela 
table = soup.find('table',attrs={'id':'jmsInfo'}) 
rows = [] 
# corre todas as tabelas encontradas
for row in table.findAll('tr')[1:]: 
    cells = [] 
    #SÓ DEUS SABE O QUE TA ACONTECENDO AQUI
    if (row.contents[5].string and row.contents[2].string):
        now = datetime.now() 
        b_date = datetime.strptime(row.contents[2].string,"%m/%d/%Y") 
        span = now - b_date 
        cells.append(str(span.days)) 
        cells.append(row.contents[5].string) 
        rows.append(cells) 
# salva num arquivo Excel
outfile = open("./news.csv", "w") 
writer = csv.writer(outfile) 
writer.writerows(rows)
